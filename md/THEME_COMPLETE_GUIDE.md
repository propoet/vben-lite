# Vben CSS å˜é‡ä¸è®¾è®¡ç³»ç»Ÿã€ä¸»é¢˜åˆ‡æ¢ã€æ¢è‚¤åŠŸèƒ½å®Œæ•´å®ç°æŒ‡å—

> **æœ€ç»ˆå®Œæ•´ç‰ˆæ–‡æ¡£** - åˆå¹¶æ‰€æœ‰å®ç°æ–‡æ¡£ï¼Œæä¾›ä¸€ç«™å¼å®Œæ•´æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [å®ç°æ€»ç»“](#å®ç°æ€»ç»“)
2. [åŸç†è¯´æ˜](#åŸç†è¯´æ˜)
3. [ä¾èµ–å®‰è£…](#ä¾èµ–å®‰è£…)
4. [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
5. [å®Œæ•´ä»£ç å®ç°](#å®Œæ•´ä»£ç å®ç°)
6. [é›†æˆæ­¥éª¤](#é›†æˆæ­¥éª¤)
7. [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
8. [ä»£ç ä¸€è‡´æ€§æ£€æŸ¥](#ä»£ç ä¸€è‡´æ€§æ£€æŸ¥)
9. [åŠŸèƒ½éªŒè¯](#åŠŸèƒ½éªŒè¯)
10. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
11. [æ£€æŸ¥æ¸…å•](#æ£€æŸ¥æ¸…å•)

---

## å®ç°æ€»ç»“

æœ¬å®ç°å®Œå…¨æŒ‰ç…§ vben çš„ä»£ç ç»“æ„å’Œå®ç°æ–¹å¼ï¼Œåœ¨é monorepo å•ä½“é¡¹ç›®ä¸­å®ç°äº† CSS å˜é‡ä¸è®¾è®¡ç³»ç»Ÿã€ä¸»é¢˜åˆ‡æ¢ã€æ¢è‚¤åŠŸèƒ½ã€‚

### âœ… æ ¸å¿ƒåŠŸèƒ½

- âœ… **CSS å˜é‡ç³»ç»Ÿ**ï¼ˆåŸºäº shadcn-vue è®¾è®¡è§„èŒƒï¼‰
- âœ… **ä¸»é¢˜åˆ‡æ¢**ï¼ˆlight/dark/autoï¼‰
- âœ… **å†…ç½®ä¸»é¢˜é¢„è®¾**ï¼ˆ12 ç§ä¸»é¢˜ï¼šdefault, violet, pink, rose, sky-blue, deep-blue, green, deep-green, orange, yellow, zinc, neutral, slate, grayï¼‰
- âœ… **è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²**ï¼ˆprimary, success, warning, destructiveï¼‰
- âœ… **åœ†è§’é…ç½®**ï¼ˆ0-2remï¼‰
- âœ… **å­—ä½“å¤§å°é…ç½®**ï¼ˆ12-24pxï¼‰
- âœ… **ç°è‰²æ¨¡å¼**å’Œ**è‰²å¼±æ¨¡å¼**
- âœ… **ä¸»é¢˜æŒä¹…åŒ–å­˜å‚¨**ï¼ˆlocalStorageï¼‰
- âœ… **å“åº”å¼ä¸»é¢˜åˆ‡æ¢**ï¼ˆè·Ÿéšç³»ç»Ÿä¸»é¢˜ï¼‰

### âœ… ä»£ç ä¸€è‡´æ€§

- âœ… æ‰€æœ‰æ–‡ä»¶ä¸ vben æºç é€è¡Œå¯¹æ¯”ï¼Œç¡®ä¿å®Œå…¨ä¸€è‡´
- âœ… æ–‡ä»¶ç»“æ„ç»„ç»‡ä¸ vben å®Œå…¨ä¸€è‡´
- âœ… å‘½åè§„èŒƒä¸ vben å®Œå…¨ä¸€è‡´
- âœ… æ³¨é‡Šæ ¼å¼ä¸ vben å®Œå…¨ä¸€è‡´
- âœ… ä»£ç é€»è¾‘ä¸ vben å®Œå…¨ä¸€è‡´

---

## åŸç†è¯´æ˜

### 1. æ¶æ„è®¾è®¡

Vben çš„ä¸»é¢˜ç³»ç»Ÿé‡‡ç”¨**åˆ†å±‚æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     åº”ç”¨å±‚ (Application)            â”‚
â”‚  - ä½¿ç”¨ composables                 â”‚
â”‚  - ç»„ä»¶é›†æˆ                         â”‚
â”‚  - ç”¨æˆ·äº¤äº’                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åå¥½è®¾ç½®å±‚ (Preferences)           â”‚
â”‚  - ä¸»é¢˜é…ç½®ç®¡ç†                     â”‚
â”‚  - æŒä¹…åŒ–å­˜å‚¨                       â”‚
â”‚  - å“åº”å¼æ›´æ–°                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é¢œè‰²ç³»ç»Ÿå±‚ (Color System)          â”‚
â”‚  - é¢œè‰²è½¬æ¢ (RGB/HSL/HEX)           â”‚
â”‚  - é¢œè‰²è‰²é˜¶ç”Ÿæˆ                     â”‚
â”‚  - CSS å˜é‡ç”Ÿæˆ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®¾è®¡ä»¤ç‰Œå±‚ (Design Tokens)          â”‚
â”‚  - å®šä¹‰æ‰€æœ‰ CSS å˜é‡                â”‚
â”‚  - æ”¯æŒ light/dark æ¨¡å¼             â”‚
â”‚  - æ”¯æŒå¤šç§å†…ç½®ä¸»é¢˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. CSS å˜é‡ç³»ç»Ÿ

Vben ä½¿ç”¨ CSS å˜é‡å®ç°ä¸»é¢˜ç³»ç»Ÿï¼š

**ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨ HSL æ ¼å¼ï¼ˆæ—  `hsl()` åŒ…è£…ï¼Œå¦‚ `212 100% 45%`ï¼‰
- æ”¯æŒ `data-theme` å±æ€§åˆ‡æ¢ä¸»é¢˜
- æ”¯æŒ `.dark` ç±»åˆ‡æ¢æš—è‰²æ¨¡å¼
- åŠ¨æ€æ›´æ–° CSS å˜é‡

**ç¤ºä¾‹ï¼š**
```css
:root {
  --primary: 212 100% 45%;
  --background: 0 0% 100%;
}

.dark {
  --background: 222.34deg 10.43% 12.27%;
}

[data-theme='violet'] {
  --ring: 262.1 83.3% 57.8%;
}
```

### 3. ä¸»é¢˜åˆ‡æ¢æœºåˆ¶

1. **æ¨¡å¼åˆ‡æ¢**ï¼šé€šè¿‡ `html.dark` ç±»åˆ‡æ¢
2. **ä¸»é¢˜åˆ‡æ¢**ï¼šé€šè¿‡ `data-theme` å±æ€§åˆ‡æ¢
3. **é¢œè‰²æ›´æ–°**ï¼šåŠ¨æ€ç”Ÿæˆ CSS å˜é‡
4. **æŒä¹…åŒ–**ï¼šä½¿ç”¨ localStorage ä¿å­˜é…ç½®

### 4. é¢œè‰²ç”ŸæˆåŸç†

ä½¿ç”¨ `theme-colors` åº“ç”Ÿæˆé¢œè‰²è‰²é˜¶ï¼š

```typescript
// è¾“å…¥ï¼šä¸»è‰² #3b82f6
// è¾“å‡ºï¼š--primary-50 åˆ° --primary-950 çš„è‰²é˜¶
const colors = getColors('#3b82f6');
// { 50: '#eff6ff', 100: '#dbeafe', ..., 950: '#172554' }
```

ç„¶åè½¬æ¢ä¸º HSL æ ¼å¼å¹¶è®¾ç½®ä¸º CSS å˜é‡ã€‚

### 5. ä¸ºä»€ä¹ˆä½¿ç”¨ HSL æ ¼å¼ï¼Ÿ

HSL æ ¼å¼æ›´é€‚åˆä¸»é¢˜ç³»ç»Ÿï¼š
- æ˜“äºè°ƒæ•´äº®åº¦å’Œé¥±å’Œåº¦
- æ”¯æŒ CSS å˜é‡ç›´æ¥ä½¿ç”¨
- ç¬¦åˆ shadcn-vue è®¾è®¡è§„èŒƒ

---

## ä¾èµ–å®‰è£…

### å¿…éœ€ä¾èµ–

```bash
pnpm add @ctrl/tinycolor theme-colors defu es-toolkit lodash.clonedeep
pnpm add -D @types/lodash.clonedeep
```

**ä¾èµ–è¯´æ˜ï¼š**

| ä¾èµ– | ä½œç”¨ |
|------|------|
| `@ctrl/tinycolor` | é¢œè‰²è½¬æ¢å’Œå¤„ç†åº“ï¼Œç”¨äº HSL/RGB/HEX è½¬æ¢ |
| `theme-colors` | ç”Ÿæˆä¸»é¢˜é¢œè‰²è‰²é˜¶ï¼ˆ50-950ï¼‰ |
| `defu` | æ·±åº¦åˆå¹¶å¯¹è±¡ï¼Œç”¨äºé…ç½®åˆå¹¶ |
| `es-toolkit` | å·¥å…·å‡½æ•°åº“ï¼ˆget, set, isEqualï¼‰ |
| `lodash.clonedeep` | æ·±æ‹·è´å·¥å…· |

### å·²æœ‰ä¾èµ–ï¼ˆæ— éœ€å®‰è£…ï¼‰

- `vue` - Vue 3
- `@vueuse/core` - VueUse å·¥å…·åº“ï¼ˆå·²å®‰è£…ï¼‰
- `tailwindcss` - Tailwind CSSï¼ˆå·²é…ç½®ï¼‰

---

## æ–‡ä»¶ç»“æ„

```
vben-lite/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ cache/                      # ç¼“å­˜ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ storage-manager.ts      # å­˜å‚¨ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ color/                      # é¢œè‰²å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ color.ts                # é¢œè‰²åˆ¤æ–­
â”‚   â”‚   â”‚   â”œâ”€â”€ convert.ts              # é¢œè‰²è½¬æ¢
â”‚   â”‚   â”‚   â”œâ”€â”€ generator.ts            # é¢œè‰²å˜é‡ç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                # å¯¼å‡º
â”‚   â”‚   â””â”€â”€ utils/                      # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ diff.ts                 # å¯¹è±¡å·®å¼‚æ¯”è¾ƒ
â”‚   â”‚       â”œâ”€â”€ merge.ts                # å¯¹è±¡åˆå¹¶
â”‚   â”‚       â”œâ”€â”€ update-css-variables.ts # CSS å˜é‡æ›´æ–°
â”‚   â”‚       â”œâ”€â”€ util.ts                 # é€šç”¨å·¥å…·ï¼ˆisMacOsç­‰ï¼‰
â”‚   â”‚       â”œâ”€â”€ window.ts               # çª—å£å·¥å…·
â”‚   â”‚       â””â”€â”€ index.ts                # å¯¼å‡º
â”‚   â”œâ”€â”€ preferences/                    # åå¥½è®¾ç½®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ constants.ts                # ä¸»é¢˜å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ config.ts                    # é»˜è®¤é…ç½®
â”‚   â”‚   â”œâ”€â”€ types.ts                     # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ preferences.ts               # åå¥½è®¾ç½®ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ update-css-variables.ts      # CSS å˜é‡æ›´æ–°é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ use-preferences.ts           # Composables
â”‚   â”‚   â””â”€â”€ index.ts                     # å¯¼å‡º
â”‚   â”œâ”€â”€ styles/                          # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ design-tokens/               # è®¾è®¡ä»¤ç‰Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ default.css              # é»˜è®¤ä¸»é¢˜ï¼ˆ383 è¡Œï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ dark.css                 # æš—è‰²ä¸»é¢˜ï¼ˆ447 è¡Œï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                 # å¯¼å…¥æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css                    # å…¨å±€æ ·å¼å…¥å£
â”‚   â”œâ”€â”€ types/                           # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ preferences.ts               # ä¸»é¢˜ç±»å‹
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ ThemeDemo.vue                # æ¼”ç¤ºç»„ä»¶
```

---

## å®Œæ•´ä»£ç å®ç°

æ‰€æœ‰æ–‡ä»¶çš„å®Œæ•´ä»£ç å·²åˆ›å»ºåœ¨ `implementation-example/src/` ç›®å½•ä¸‹ï¼ŒåŒ…æ‹¬ï¼š

### 1. ç±»å‹å®šä¹‰

- âœ… `src/types/preferences.ts` - ä¸»é¢˜ç›¸å…³ç±»å‹å®šä¹‰ï¼ˆå®Œæ•´ç±»å‹ï¼Œä¸ vben å®Œå…¨ä¸€è‡´ï¼‰

### 2. ç¼“å­˜ç®¡ç†

- âœ… `src/shared/cache/storage-manager.ts` - å­˜å‚¨ç®¡ç†å™¨ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰

### 3. å·¥å…·å‡½æ•°ï¼ˆ6 ä¸ªæ–‡ä»¶ï¼‰

- âœ… `src/shared/utils/merge.ts` - å¯¹è±¡åˆå¹¶ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/utils/diff.ts` - å¯¹è±¡å·®å¼‚æ¯”è¾ƒï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/utils/update-css-variables.ts` - CSS å˜é‡æ›´æ–°ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/utils/util.ts` - é€šç”¨å·¥å…·ï¼ˆisMacOsç­‰ï¼Œä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/utils/window.ts` - çª—å£å·¥å…·ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/utils/index.ts` - å·¥å…·å‡½æ•°å¯¼å‡ºï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰

### 4. é¢œè‰²å·¥å…·ï¼ˆ4 ä¸ªæ–‡ä»¶ï¼‰

- âœ… `src/shared/color/convert.ts` - é¢œè‰²è½¬æ¢ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/color/color.ts` - é¢œè‰²åˆ¤æ–­ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/color/generator.ts` - é¢œè‰²å˜é‡ç”Ÿæˆï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/shared/color/index.ts` - é¢œè‰²å·¥å…·å¯¼å‡ºï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰

### 5. åå¥½è®¾ç½®æ¨¡å—ï¼ˆ7 ä¸ªæ–‡ä»¶ï¼‰

- âœ… `src/preferences/types.ts` - ç±»å‹å®šä¹‰ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/preferences/config.ts` - é»˜è®¤é…ç½®ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/preferences/constants.ts` - ä¸»é¢˜å¸¸é‡ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/preferences/update-css-variables.ts` - CSS å˜é‡æ›´æ–°é€»è¾‘ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/preferences/preferences.ts` - åå¥½è®¾ç½®ç®¡ç†å™¨ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/preferences/use-preferences.ts` - Composablesï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/preferences/index.ts` - æ¨¡å—å¯¼å‡ºï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰

### 6. è®¾è®¡ç³»ç»Ÿ CSSï¼ˆ4 ä¸ªæ–‡ä»¶ï¼‰

- âœ… `src/styles/design-tokens/default.css` - é»˜è®¤ä¸»é¢˜ CSS å˜é‡ï¼ˆ383 è¡Œï¼Œä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/styles/design-tokens/dark.css` - æš—è‰²ä¸»é¢˜ CSS å˜é‡ï¼ˆ447 è¡Œï¼Œä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/styles/design-tokens/index.ts` - CSS å¯¼å…¥æ–‡ä»¶ï¼ˆä¸ vben å®Œå…¨ä¸€è‡´ï¼‰
- âœ… `src/styles/index.css` - å…¨å±€æ ·å¼å…¥å£

### 7. ä½¿ç”¨ç¤ºä¾‹ï¼ˆ2 ä¸ªæ–‡ä»¶ï¼‰

- âœ… `src/main.ts.example` - åº”ç”¨å…¥å£ç¤ºä¾‹
- âœ… `src/components/ThemeDemo.vue` - ä¸»é¢˜æ¼”ç¤ºç»„ä»¶

**æ³¨æ„ï¼š** æ‰€æœ‰æ–‡ä»¶ä»£ç å·²å®Œæ•´åˆ›å»ºï¼Œå¯ç›´æ¥æŸ¥çœ‹ `implementation-example/src/` ç›®å½•ã€‚

---

## é›†æˆæ­¥éª¤

### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
pnpm add @ctrl/tinycolor theme-colors defu es-toolkit lodash.clonedeep
pnpm add -D @types/lodash.clonedeep
```

### æ­¥éª¤ 2ï¼šåˆ›å»ºç›®å½•ç»“æ„

```bash
mkdir -p src/shared/cache
mkdir -p src/shared/color
mkdir -p src/shared/utils
mkdir -p src/preferences
mkdir -p src/styles/design-tokens
mkdir -p src/types
```

### æ­¥éª¤ 3ï¼šå¤åˆ¶æ–‡ä»¶

å°† `implementation-example/src/` ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„é¡¹ç›® `src/` ç›®å½•ã€‚

### æ­¥éª¤ 4ï¼šé…ç½®è·¯å¾„åˆ«å

**vite.config.ts:**
```typescript
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import path from 'path';

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
});
```

**tsconfig.json:**
```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

### æ­¥éª¤ 5ï¼šåˆå§‹åŒ–åå¥½è®¾ç½®

åœ¨ `src/main.ts` ä¸­ï¼š

```typescript
import { createApp } from 'vue';
import App from './App.vue';
import { initPreferences } from './preferences';

// åˆå§‹åŒ–åå¥½è®¾ç½®ï¼ˆå¿…é¡»åœ¨å¯¼å…¥æ ·å¼ä¹‹å‰ï¼‰
initPreferences({
  namespace: 'vben-lite',
  overrides: {
    theme: {
      mode: 'light',
      builtinType: 'default',
    },
  },
});

// å¯¼å…¥æ ·å¼ï¼ˆå¿…é¡»åœ¨åˆå§‹åŒ–åï¼‰
import './styles/index.css';

const app = createApp(App);
app.mount('#app');
```

### æ­¥éª¤ 6ï¼šæµ‹è¯•

è¿è¡Œé¡¹ç›®å¹¶æµ‹è¯•ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ã€‚

---

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```vue
<script setup lang="ts">
import { usePreferences, updatePreferences } from '@/preferences';

const { preferences, isDark, theme } = usePreferences();

function toggleTheme() {
  updatePreferences({
    theme: {
      mode: isDark.value ? 'light' : 'dark',
    },
  });
}
</script>

<template>
  <div>
    <button @click="toggleTheme">åˆ‡æ¢ä¸»é¢˜</button>
    <p>å½“å‰ä¸»é¢˜: {{ theme }}</p>
  </div>
</template>
```

### åˆ‡æ¢å†…ç½®ä¸»é¢˜

```typescript
import { updatePreferences } from '@/preferences';

updatePreferences({
  theme: {
    builtinType: 'violet', // æˆ– 'pink', 'green' ç­‰
  },
});
```

### è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²

```typescript
updatePreferences({
  theme: {
    colorPrimary: 'hsl(212 100% 45%)',
    colorSuccess: 'hsl(144 57% 58%)',
    colorWarning: 'hsl(42 84% 61%)',
    colorDestructive: 'hsl(348 100% 61%)',
  },
});
```

### é…ç½®åœ†è§’å’Œå­—ä½“å¤§å°

```typescript
updatePreferences({
  theme: {
    radius: '0.5', // rem
    fontSize: 16, // px
  },
});
```

### å¯ç”¨ç°è‰²/è‰²å¼±æ¨¡å¼

```typescript
updatePreferences({
  app: {
    colorGrayMode: true,
    colorWeakMode: true,
  },
});
```

### ä½¿ç”¨ Composables

```vue
<script setup lang="ts">
import { usePreferences } from '@/preferences';

const {
  isDark,
  theme,
  isMobile,
  layout,
  sidebarCollapsed,
  keepAlive,
  isFullContent,
  isSideNav,
  isHeaderNav,
  // ... æ›´å¤šè®¡ç®—å±æ€§
} = usePreferences();
</script>
```

---

## ä»£ç ä¸€è‡´æ€§æ£€æŸ¥

### âœ… å·²å®Œæˆçš„æ£€æŸ¥

æ‰€æœ‰æ–‡ä»¶å·²ä¸ vben æºç é€è¡Œå¯¹æ¯”ï¼Œç¡®ä¿å®Œå…¨ä¸€è‡´ï¼š

| æ–‡ä»¶                                    | çŠ¶æ€        | è¯´æ˜         |
| --------------------------------------- | ----------- | ------------ |
| `storage-manager.ts`                    | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `merge.ts`                              | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `diff.ts`                               | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `update-css-variables.ts` (utils)       | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `util.ts`                               | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `window.ts`                             | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `convert.ts`                            | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `color.ts`                              | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `generator.ts`                          | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `constants.ts`                          | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `update-css-variables.ts` (preferences) | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `preferences.ts`                        | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `default.css`                           | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |
| `dark.css`                              | âœ… å®Œå…¨ä¸€è‡´ | é€è¡Œå¯¹æ¯”é€šè¿‡ |

### å”¯ä¸€å·®å¼‚è¯´æ˜

**è·¯å¾„åˆ«å**ï¼šä½¿ç”¨ `@/` åˆ«åæ›¿ä»£ vben çš„åŒ…åå¯¼å…¥ï¼ˆ`@vben-core/shared`ï¼‰ï¼Œè¿™æ˜¯å•ä½“é¡¹ç›®çš„æ ‡å‡†åšæ³•ã€‚

---

## åŠŸèƒ½éªŒè¯

### æµ‹è¯•æ¸…å•

- [x] ä¸»é¢˜æ¨¡å¼åˆ‡æ¢ï¼ˆlight/dark/autoï¼‰
- [x] å†…ç½®ä¸»é¢˜åˆ‡æ¢ï¼ˆ12 ç§ä¸»é¢˜ï¼‰
- [x] è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²
- [x] åœ†è§’é…ç½®
- [x] å­—ä½“å¤§å°é…ç½®
- [x] ç°è‰²æ¨¡å¼
- [x] è‰²å¼±æ¨¡å¼
- [x] ä¸»é¢˜æŒä¹…åŒ–ï¼ˆåˆ·æ–°åä¿æŒï¼‰
- [x] ç³»ç»Ÿä¸»é¢˜è·Ÿéšï¼ˆauto æ¨¡å¼ï¼‰

### æµ‹è¯•æ–¹æ³•

1. è¿è¡Œé¡¹ç›®ï¼š`pnpm dev`
2. è®¿é—®æ¼”ç¤ºç»„ä»¶ï¼š`/theme-demo`ï¼ˆå¦‚æœå·²é…ç½®è·¯ç”±ï¼‰
3. æˆ–ç›´æ¥åœ¨ `App.vue` ä¸­ä½¿ç”¨ `ThemeDemo` ç»„ä»¶
4. æµ‹è¯•å„é¡¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ

---

## å¸¸è§é—®é¢˜

### Q1: ä¸»é¢˜åˆ‡æ¢ä¸ç”Ÿæ•ˆï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. æ˜¯å¦æ­£ç¡®åˆå§‹åŒ– `initPreferences`
2. CSS æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥ï¼ˆå¿…é¡»åœ¨åˆå§‹åŒ–åï¼‰
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
4. `data-theme` å’Œ `dark` ç±»æ˜¯å¦æ­£ç¡®åº”ç”¨

### Q2: é¢œè‰²å˜é‡æœªæ›´æ–°ï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. é¢œè‰²æ ¼å¼æ˜¯å¦ä¸º HSLï¼ˆå¦‚ `hsl(212 100% 45%)`ï¼‰
2. æ˜¯å¦æ­£ç¡®è°ƒç”¨ `updatePreferences`
3. æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ CSS å˜é‡æ˜¯å¦æ›´æ–°

### Q3: æŒä¹…åŒ–ä¸ç”Ÿæ•ˆï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. localStorage æ˜¯å¦å¯ç”¨
2. å‘½åç©ºé—´æ˜¯å¦æ­£ç¡®
3. æµè§ˆå™¨æ˜¯å¦ç¦ç”¨ localStorage

### Q4: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰ä¸»é¢˜ï¼Ÿ

**A:** 
1. åœ¨ `constants.ts` çš„ `BUILT_IN_THEME_PRESETS` ä¸­æ·»åŠ ä¸»é¢˜é¢„è®¾ï¼š
```typescript
{
  color: 'hsl(200 100% 50%)',
  type: 'my-theme',
}
```
2. åœ¨ `default.css` å’Œ `dark.css` ä¸­æ·»åŠ å¯¹åº”çš„ `[data-theme='my-theme']` è§„åˆ™

### Q5: ä¸ºä»€ä¹ˆä½¿ç”¨ HSL æ ¼å¼ï¼Ÿ

**A:** HSL æ ¼å¼æ›´é€‚åˆä¸»é¢˜ç³»ç»Ÿï¼š
- æ˜“äºè°ƒæ•´äº®åº¦å’Œé¥±å’Œåº¦
- æ”¯æŒ CSS å˜é‡ç›´æ¥ä½¿ç”¨
- ç¬¦åˆ shadcn-vue è®¾è®¡è§„èŒƒ

### Q6: å¦‚ä½•é‡ç½®ä¸»é¢˜é…ç½®ï¼Ÿ

**A:** ä½¿ç”¨ `resetPreferences` æ–¹æ³•ï¼š
```typescript
import { resetPreferences } from '@/preferences';

resetPreferences();
```

### Q7: å¦‚ä½•æ¸…é™¤ç¼“å­˜ï¼Ÿ

**A:** ä½¿ç”¨ `clearCache` æ–¹æ³•ï¼š
```typescript
import { clearCache } from '@/preferences';

clearCache();
```

---

## æ£€æŸ¥æ¸…å•

### âœ… æ–‡ä»¶åˆ›å»ºæ£€æŸ¥

#### ç±»å‹å®šä¹‰
- [x] `src/types/preferences.ts` - ä¸»é¢˜ç›¸å…³ç±»å‹å®šä¹‰

#### ç¼“å­˜ç®¡ç†
- [x] `src/shared/cache/storage-manager.ts` - å­˜å‚¨ç®¡ç†å™¨

#### å·¥å…·å‡½æ•°ï¼ˆ6 ä¸ªæ–‡ä»¶ï¼‰
- [x] `src/shared/utils/merge.ts` - å¯¹è±¡åˆå¹¶
- [x] `src/shared/utils/diff.ts` - å¯¹è±¡å·®å¼‚æ¯”è¾ƒ
- [x] `src/shared/utils/update-css-variables.ts` - CSS å˜é‡æ›´æ–°
- [x] `src/shared/utils/util.ts` - é€šç”¨å·¥å…·ï¼ˆisMacOsï¼‰
- [x] `src/shared/utils/window.ts` - çª—å£å·¥å…·
- [x] `src/shared/utils/index.ts` - å·¥å…·å‡½æ•°å¯¼å‡º

#### é¢œè‰²å·¥å…·ï¼ˆ4 ä¸ªæ–‡ä»¶ï¼‰
- [x] `src/shared/color/color.ts` - é¢œè‰²åˆ¤æ–­
- [x] `src/shared/color/convert.ts` - é¢œè‰²è½¬æ¢
- [x] `src/shared/color/generator.ts` - é¢œè‰²å˜é‡ç”Ÿæˆ
- [x] `src/shared/color/index.ts` - é¢œè‰²å·¥å…·å¯¼å‡º

#### åå¥½è®¾ç½®æ¨¡å—ï¼ˆ7 ä¸ªæ–‡ä»¶ï¼‰
- [x] `src/preferences/types.ts` - ç±»å‹å®šä¹‰
- [x] `src/preferences/config.ts` - é»˜è®¤é…ç½®
- [x] `src/preferences/constants.ts` - ä¸»é¢˜å¸¸é‡
- [x] `src/preferences/update-css-variables.ts` - CSS å˜é‡æ›´æ–°é€»è¾‘
- [x] `src/preferences/preferences.ts` - åå¥½è®¾ç½®ç®¡ç†å™¨
- [x] `src/preferences/use-preferences.ts` - Composables
- [x] `src/preferences/index.ts` - æ¨¡å—å¯¼å‡º

#### è®¾è®¡ç³»ç»Ÿ CSSï¼ˆ4 ä¸ªæ–‡ä»¶ï¼‰
- [x] `src/styles/design-tokens/default.css` - é»˜è®¤ä¸»é¢˜ï¼ˆ383 è¡Œï¼‰
- [x] `src/styles/design-tokens/dark.css` - æš—è‰²ä¸»é¢˜ï¼ˆ447 è¡Œï¼‰
- [x] `src/styles/design-tokens/index.ts` - CSS å¯¼å…¥æ–‡ä»¶
- [x] `src/styles/index.css` - å…¨å±€æ ·å¼å…¥å£

#### ä½¿ç”¨ç¤ºä¾‹ï¼ˆ2 ä¸ªæ–‡ä»¶ï¼‰
- [x] `src/main.ts.example` - åº”ç”¨å…¥å£ç¤ºä¾‹
- [x] `src/components/ThemeDemo.vue` - ä¸»é¢˜æ¼”ç¤ºç»„ä»¶

### âœ… ä»£ç ä¸€è‡´æ€§æ£€æŸ¥

- [x] æ‰€æœ‰æ–‡ä»¶ä¸ vben æºç é€è¡Œå¯¹æ¯”
- [x] æ–‡ä»¶ç»“æ„ç»„ç»‡ä¸ vben å®Œå…¨ä¸€è‡´
- [x] å‘½åè§„èŒƒä¸ vben å®Œå…¨ä¸€è‡´
- [x] æ³¨é‡Šæ ¼å¼ä¸ vben å®Œå…¨ä¸€è‡´
- [x] ä»£ç é€»è¾‘ä¸ vben å®Œå…¨ä¸€è‡´

### âœ… åŠŸèƒ½éªŒè¯

- [x] ä¸»é¢˜æ¨¡å¼åˆ‡æ¢ï¼ˆlight/dark/autoï¼‰
- [x] å†…ç½®ä¸»é¢˜åˆ‡æ¢ï¼ˆ12 ç§ä¸»é¢˜ï¼‰
- [x] è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²
- [x] åœ†è§’é…ç½®
- [x] å­—ä½“å¤§å°é…ç½®
- [x] ç°è‰²æ¨¡å¼
- [x] è‰²å¼±æ¨¡å¼
- [x] ä¸»é¢˜æŒä¹…åŒ–
- [x] ç³»ç»Ÿä¸»é¢˜è·Ÿéš

### âœ… æ–‡æ¡£å®Œæ•´æ€§

- [x] å®ç°æŒ‡å—æ–‡æ¡£
- [x] å®Œæ•´å®ç°æ–‡æ¡£
- [x] æœ€ç»ˆå®ç°æ–‡æ¡£
- [x] å¿«é€Ÿå¼€å§‹æŒ‡å—
- [x] å®ç°æ€»ç»“æ–‡æ¡£
- [x] æ£€æŸ¥æ¸…å•æ–‡æ¡£

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

**æ‰€æœ‰æ–‡ä»¶å·²åˆ›å»ºå®Œæˆï¼Œä»£ç ä¸ vben å®Œå…¨ä¸€è‡´ï¼**

ç°åœ¨ä½ å¯ä»¥ï¼š
1. å¤åˆ¶æ‰€æœ‰æ–‡ä»¶åˆ°ä½ çš„é¡¹ç›®
2. å®‰è£…ä¾èµ–
3. åˆå§‹åŒ–åå¥½è®¾ç½®
4. å¼€å§‹ä½¿ç”¨ä¸»é¢˜ç³»ç»Ÿ

æ‰€æœ‰ä»£ç éƒ½ä¸¥æ ¼æŒ‰ç…§ vben çš„å®ç°æ–¹å¼ï¼Œç¡®ä¿åŠŸèƒ½å®Œå…¨ä¸€è‡´ã€‚

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [Vben å®˜æ–¹æ–‡æ¡£ - ä¸»é¢˜](https://doc.vben.pro/guide/in-depth/theme.html)
- [shadcn-vue ä¸»é¢˜ç³»ç»Ÿ](https://www.shadcn-vue.com/themes.html)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

- **2024-XX-XX**: åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæˆæ‰€æœ‰æ–‡ä»¶åˆ›å»ºå’Œä»£ç ä¸€è‡´æ€§éªŒè¯
- **2024-XX-XX**: åˆå¹¶æ‰€æœ‰æ–‡æ¡£ï¼Œåˆ›å»ºæœ€ç»ˆå®Œæ•´æŒ‡å—

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2024-XX-XX